{% extends "base.html" %}

{% block title %}Dashboard - EHS Electronic Journal{% endblock %}

{% block page_header %}
<div class="page-header d-print-none">
  <div class="container-xl">
    <div class="row g-2 align-items-center">
      <div class="col">
        <div class="page-pretitle">
          Welcome back
        </div>
        <h2 class="page-title">
          ðŸ”¬ Laboratory Dashboard
        </h2>
        <div class="page-subtitle">
          Real-time monitoring and management overview
        </div>
      </div>
      <div class="col-auto ms-auto d-print-none">
        <div class="btn-list">
          <a href="/chemical_inventory/add" class="btn btn-success">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
            Add Chemical
          </a>
          <a href="/analytics" class="btn btn-primary">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
              <polyline points="3,12 7,8 13,16 21,6"/>
            </svg>
            Analytics
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block content %}
<!-- Key Metrics Cards -->
<div class="row row-cards mb-3">
  <div class="col-sm-6 col-lg-3">
    <div class="card card-sm">
      <div class="card-body">
        <div class="row align-items-center">
          <div class="col-auto">
            <span class="bg-success text-white avatar">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M9 7h6l-1 9h-4l-1 -9z"/>
                <path d="M7 7v-.5a2.5 2.5 0 0 1 5 0v.5"/>
                <path d="M12 7v-.5a2.5 2.5 0 0 1 5 0v.5"/>
              </svg>
            </span>
          </div>
          <div class="col">
            <div class="font-weight-medium">
              247 Active Chemicals
            </div>
            <div class="text-muted">
              <!-- INTEGRATION POINT: Chemical inventory count will be dynamically loaded here -->
              <span class="text-success">+12%</span> from last month
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="col-sm-6 col-lg-3">
    <div class="card card-sm">
      <div class="card-body">
        <div class="row align-items-center">
          <div class="col-auto">
            <span class="bg-warning text-white avatar">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M12 9v2m0 4v.01"/>
                <path d="M5.07 19H19a2 2 0 0 0 1.75 -2.75L13.75 4a2 2 0 0 0 -3.5 0L3.25 16.25a2 2 0 0 0 1.75 2.75"/>
              </svg>
            </span>
          </div>
          <div class="col">
            <div class="font-weight-medium">
              12 Expiring Soon
            </div>
            <div class="text-muted">
              <!-- INTEGRATION POINT: Chemical expiration monitoring will be dynamically loaded here -->
              Within 30 days
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="col-sm-6 col-lg-3">
    <div class="card card-sm">
      <div class="card-body">
        <div class="row align-items-center">
          <div class="col-auto">
            <span class="bg-primary text-white avatar">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77 -3.77a6 6 0 0 1 -7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1 -3 -3l6.91 -6.91a6 6 0 0 1 7.94 -7.94l-3.76 3.76z"/>
              </svg>
            </span>
          </div>
          <div class="col">
            <div class="font-weight-medium">
              89 Equipment Items
            </div>
            <div class="text-muted">
              <!-- INTEGRATION POINT: Equipment status will be dynamically loaded here -->
              <span class="text-success">All calibrated</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="col-sm-6 col-lg-3">
    <div class="card card-sm">
      <div class="card-body">
        <div class="row align-items-center">
          <div class="col-auto">
            <span class="bg-danger text-white avatar">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M7 4v16l13 -8z"/>
              </svg>
            </span>
          </div>
          <div class="col">
            <div class="font-weight-medium">
              3 Maintenance Due
            </div>
            <div class="text-muted">
              <!-- INTEGRATION POINT: Maintenance alerts will be dynamically loaded here -->
              <span class="text-danger">Requires attention</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Charts and Analytics -->
<div class="row">
  <div class="col-lg-8">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Chemical Inventory Trends</h3>
        <!-- INTEGRATION POINT: Chart controls and filters will be added here -->
      </div>
      <div class="card-body">
        <div id="chart-chemical-trends" style="height: 300px;">
          <!-- Placeholder for chart -->
          <div class="d-flex align-items-center justify-content-center h-100">
            <div class="text-center">
              <div class="text-muted mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-lg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <polyline points="3,12 7,8 13,16 21,6"/>
                </svg>
              </div>
              <h4 class="text-muted">Chemical Inventory Trends</h4>
              <p class="text-muted">Real-time analytics chart will be displayed here</p>
              <!-- INTEGRATION POINT: ApexCharts or similar charting library will be integrated here -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="col-lg-4">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Equipment Status</h3>
      </div>
      <div class="card-body">
        <div id="chart-equipment-status" style="height: 300px;">
          <!-- Placeholder for donut chart -->
          <div class="d-flex align-items-center justify-content-center h-100">
            <div class="text-center">
              <div class="text-muted mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-lg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M12 6v6l4 2"/>
                </svg>
              </div>
              <h5 class="text-muted">Equipment Status</h5>
              <p class="text-muted">Donut chart showing equipment statuses</p>
              <!-- INTEGRATION POINT: Equipment status pie chart will be integrated here -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Recent Activity and Quick Actions -->
<div class="row mt-3">
  <div class="col-lg-6">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Recent Activity</h3>
      </div>
      <div class="card-body">
        <div class="divide-y">
          <!-- INTEGRATION POINT: Recent activity feed will be dynamically populated here -->
          <div class="row align-items-center py-2">
            <div class="col-auto">
              <span class="avatar avatar-xs bg-success text-white rounded-circle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <line x1="12" y1="5" x2="12" y2="19"/>
                  <line x1="5" y1="12" x2="19" y2="12"/>
                </svg>
              </span>
            </div>
            <div class="col">
              <div class="text-truncate">
                <strong>New chemical added:</strong> Hydrochloric Acid 37%
              </div>
              <div class="text-muted">2 hours ago by Lab Tech</div>
            </div>
          </div>
          
          <div class="row align-items-center py-2">
            <div class="col-auto">
              <span class="avatar avatar-xs bg-warning text-white rounded-circle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M12 9v2m0 4v.01"/>
                  <path d="M5.07 19H19a2 2 0 0 0 1.75 -2.75L13.75 4a2 2 0 0 0 -3.5 0L3.25 16.25a2 2 0 0 0 1.75 2.75"/>
                </svg>
              </span>
            </div>
            <div class="col">
              <div class="text-truncate">
                <strong>Chemical expiring:</strong> Sodium Chloride in 5 days
              </div>
              <div class="text-muted">4 hours ago</div>
            </div>
          </div>
          
          <div class="row align-items-center py-2">
            <div class="col-auto">
              <span class="avatar avatar-xs bg-primary text-white rounded-circle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77 -3.77a6 6 0 0 1 -7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1 -3 -3l6.91 -6.91a6 6 0 0 1 7.94 -7.94l-3.76 3.76z"/>
                </svg>
              </span>
            </div>
            <div class="col">
              <div class="text-truncate">
                <strong>Maintenance completed:</strong> ICP-OES daily maintenance
              </div>
              <div class="text-muted">1 day ago by Maintenance Team</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="col-lg-6">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Quick Actions</h3>
      </div>
      <div class="card-body">
        <div class="row g-2">
          <!-- INTEGRATION POINT: Quick action buttons will be dynamically populated here -->
          <div class="col-6">
            <a href="/chemical_inventory/" class="btn btn-outline-primary w-100">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M9 7h6l-1 9h-4l-1 -9z"/>
                <path d="M7 7v-.5a2.5 2.5 0 0 1 5 0v.5"/>
                <path d="M12 7v-.5a2.5 2.5 0 0 1 5 0v.5"/>
              </svg>
              Inventory
            </a>
          </div>
          <div class="col-6">
            <a href="/reagents/mm" class="btn btn-outline-success w-100">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M5 12V7a1 1 0 0 1 1 -1h4l3 5h7l-3 -5a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v5"/>
                <path d="M6 20a2 2 0 0 1 -2 -2v-3a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v3a2 2 0 0 1 -2 2"/>
              </svg>
              Reagents
            </a>
          </div>
          <div class="col-6">
            <a href="/standards/mm" class="btn btn-outline-warning w-100">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M7 20l10 0"/>
                <path d="M6 6l6 0l4 14l-10 0l0 -14z"/>
                <path d="M12 6l0 -1a2 2 0 0 0 -2 -2h-2a2 2 0 0 0 -2 2v1"/>
              </svg>
              Standards
            </a>
          </div>
          <div class="col-6">
            <a href="/equipment/" class="btn btn-outline-info w-100">
              <svg xmlns="http://www.w3.org/2000/svg" class="icon me-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77 -3.77a6 6 0 0 1 -7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1 -3 -3l6.91 -6.91a6 6 0 0 1 7.94 -7.94l-3.76 3.76z"/>
              </svg>
              Equipment
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- INTEGRATION POINT: Chart libraries (ApexCharts, Chart.js, etc.) will be included here -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Placeholder for future chart initialization
    console.log('Dashboard loaded - charts will be initialized here');
    
    // INTEGRATION POINT: Real-time data updates will be implemented here
    // Example: setInterval(updateDashboardMetrics, 30000); // Update every 30 seconds
});
</script>
{% endblock %}